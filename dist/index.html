<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

  <meta name="theme-color" content="#fafafa">

  <style type="text/css">
    .header{
      /*background-color: read;*/
      position: sticky;
      top: 0;
      box-shadow: rgba(60, 64, 67, 0.3) 0px 4px 4px 0px, rgba(60, 64, 67, 0.15) 0px 8px 12px 6px;
      background-color: #718096;
    }
    .th{
      height: 80px;
      box-shadow: rgba(60, 64, 67, 0.3) 0px 4px 4px 0px;
      background-color: #f8f8f8;
    }
    .tr{
      border-bottom: 1px solid rgb(236, 236, 237);
    }
    .th,.td{
      --border-opacity: 1;
      border-color: #718096;
      border-color: rgba(113,128,150,1);
      border-right: 1px solid rgb(236, 236, 237);
      border-bottom: 1px solid rgb(236, 236, 237);
      word-break: break-word;
    }
    .th, .td{
      min-width: 100px;
      padding: 8px 12px;
    }
    .header, .tr{
      display: flex;
      flex-direction: row;
      width: fit-content;
      height: fit-content;
    }
    .area{
      /*overflow: auto;*/
    }
    .wrap{
      overflow: auto;
      border-bottom: 1px solid rgb(236, 236, 237);
    }
    #test{
      overflow: auto;
    }
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-thumb {
        background-color: rgb(199, 200, 201);
    }
    ::-webkit-scrollbar-track {
        background: transparent;
    }
  </style>
</head>

<body>
  <div class="wrap" style="width: 300px; height: 100px; display: none;">
        <div class="area">
          <div class="header">
            <div class="th">th 1</div>
            <div class="th">th 2</div>
            <div class="th">th 3</div>
            <div class="th">th 4</div>
            <div class="th">th 5</div>
          </div>
          <div class="body">
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">
                <div>To force same size, i'll suggest using max-width and place it under some media-query</div>
              </div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
            <div class="tr">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
            </div>
          </div>
        </div>


  </div>


  <style type="text/css">
    .body2{
    }
    .header2, .body2{
      display: grid;
      grid-template-columns: 20% 20% 200px 20% 20%;
    }
    .th, .td{
        padding: 8px 12px;
      }
  </style>

  <br/>
  <div class="wrap2" style="width: 300px; height: 100px; overflow: auto; display: none;">
        <div class="area2">
          <div class="header2">
            <div class="th2">th 1</div>
            <div class="th2">th 2</div>
            <div class="th2">th 3</div>
            <div class="th2">th 4</div>
            <div class="th2">th 5</div>
          </div>
          <div class="body2">
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
              <div class="td">td 1</div>
              <div class="td">td 2</div>
              <div class="td">td 3</div>
              <div class="td">td 4</div>
              <div class="td">td 5</div>
          </div>
        </div>
    </div>
  </div>


    <div id="render" style="width:50%; height:50vh; margin: 0 auto; display: flex; flex-direction: column-reverse;" class=""></div>



  <!-- Add your site or application content here -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
  <script src="js/vendor/modernizr-3.11.3.min.js"></script>
  <script src="js/app.js"></script>

  <script type="text/javascript">
    window.Datatable = function (idElement, config =[]) {
        const DEFAULT_OPTIONS = {};
        let instances = {};
        let option = {
          ajaxUrl: '',
          columns:[
                { 'data': 'apikey' },
                { 'data': 'name' },
                { 'data': 'cuisines' },
                { 'data': 'deeplink' },
                { 'data': 'id' },
          ]
        }
        let data = [];
        let dataHeader = [1,2,3,4,5];
        let css;
        let _idElement;
        let _idAreaData = 'datatable-body'
        datatable(idElement, config)
        makeListener()
        function datatable(idElement, config = []){
          console.log(dataHeader)
          option.ajaxUrl = config['ajaxUrl']
          _idElement = idElement
          css = `.body2 .th{ position: sticky; top: 0;}`;
          makeHeaderData()
          calcAjax()
          makeCssHeader()
        }

        function replace() {
          console.log('called replace')
        }

        async function calcAjax(url){
          if (!option.ajaxUrl) {
            return;
          }
          let urlCall = url || option.ajaxUrl
          let response = await fetch(urlCall, {
            method:'GET'
          });
          let result = await response.json();
          // let bodyTable = '<div>'
          makeBodyData(result)
          console.log(result)
        }

        function htmlToElement(html) {
            var template = document.createElement('template');
            html = html.trim(); // Never return a text node of whitespace as the result
            template.innerHTML = html;
            return template.content.firstChild;
        }

        function htmlToElements(html) {
            let template = document.createElement('template');
            template.innerHTML = html;
            return template.content.childNodes;
        }

        function encodeHTML(s) {
          if (s) {
              return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/"/g, '&quot;').replace(/'/g, '&quot;');
          }
          return '';
        };

        function makeCssHeader() {
          let style = document.createElement('style');

          if (style.styleSheet) {
              style.styleSheet.cssText = css;
          } else {
              style.appendChild(document.createTextNode(css));
          }
          document.getElementsByTagName('head')[0].appendChild(style);

          percent = Math.round(100 / dataHeader.length * 100) / 100 + '% ';
          percent = percent.repeat(dataHeader.length)
          document.getElementById(_idAreaData).style.gridTemplateColumns = percent
          document.getElementById(_idAreaData).style.display = 'grid'
          document.getElementById(_idAreaData).style.width = 'max-content'
          document.getElementById(_idElement).style.overflow = 'hidden'
        }

        function makeHeaderData(data) {
          let divElement = htmlToElement(`<div id="test"><div><div id="${_idAreaData}" class="body2"></div></div></div>`)

          for (var i = 0; i < dataHeader.length; i++) {
            childElement = htmlToElement(`<div class="th">${dataHeader[i]}</div>`)
            divElement.firstChild.firstChild.appendChild(childElement)
            document.getElementById(_idElement)
          }
          let pagingElement = htmlToElement(`<div><div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200">
  <div class="flex-1 flex justify-between sm:hidden">
    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150">
      Previous
    </a>
    <a href="#" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150">
      Next
    </a>
  </div>
  <div class="flex-1 flex justify-end">
    <div>
      <nav class="relative z-0 inline-flex shadow-sm">
        <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150" aria-label="Previous">
          <!-- Heroicon name: chevron-left -->
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
          </svg>
        </a>
        <a href="javascript:void(0)" data-page="1" class="paginate_btn -ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150">
          1
        </a>
        <a href="javascript:void(0)" data-page="2" class="paginate_btn -ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150">
          2
        </a>
        <a href="javascript:void(0)" data-page="3" class="paginate_btn md:inline-flex -ml-px relative items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150">
          3
        </a>
        <a href="#" class="-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150" aria-label="Next">
          <!-- Heroicon name: chevron-right -->
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
          </svg>
        </a>
      </nav>
    </div>
  </div>
</div></div>`)
          document.getElementById(_idElement).appendChild(pagingElement)

          document.getElementById(_idElement).appendChild(divElement)
        }

        function makeBodyData(data) {
          for (var i = 0; i < data.length; i++) {
            for (var j = 0; j < dataHeader.length; j++) {
              nameColumn = option.columns[j].data
              childElement = htmlToElement(`<div class="td">${data[i][nameColumn]}</div>`)

              document.getElementById(_idAreaData).appendChild(childElement)
            }
          }

        }

        function makeListener(){
          let elements = document.getElementsByClassName("paginate_btn");
          for (let i = 0; i < elements.length; i++) {
              elements[i].addEventListener('click', function(event) {
              event.preventDefault()
              let page = this.getAttribute("data-page");
              removeBodyData()
              calcAjax(option.ajaxUrl + '?_page=' + page);
            }, false);
          }
        }

        function removeBodyData()
        {
          let data = document.getElementById(_idAreaData).getElementsByClassName('td')
          for (var i = data.length - 1; i >= 0; --i) {
            data[i].remove();
          }
        }

    };

  </script>

  <script type="text/javascript">
    var datatable = new Datatable('render', {'ajaxUrl' : 'http://localhost:3000/restaurants'})
  </script>
</body>

</html>
